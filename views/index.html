<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IOMS | Inventory and Order Management System</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <nav class="nav-bar">
    <div class="nav-container">
      <a href="/" class="nav-brand">IOMS</a>

      <!-- main nav links -->
      <div class="nav-links" id="main-links-left">
        <a href="/" class="nav-link" id="nav-home">Home</a>
        <a href="/about" class="nav-link" id="nav-about">About</a>
        <a href="/contact" class="nav-link" id="nav-contact">Contact</a>
      </div>

      <!-- auth area (single-line, updated by JS) -->
      <div class="nav-links" id="auth-area" style="align-items:center;gap:0.6rem;">
        <a href="/login" class="nav-link" id="login-link">Login</a>
        <a href="/register" class="nav-link" id="register-link">Register</a>

        <!-- shown when logged -->
        <a href="/orders" class="nav-link" id="orders-link" style="display:none;">My Orders</a>
        <span id="user-email" style="display:none;color:#374151;font-weight:600;"></span>
        <button id="logout-btn" class="btn" style="display:none;padding:6px 10px;border-radius:8px;">Logout</button>
      </div>
    </div>
  </nav>

  <header>
    <h1>Inventory and Order Management System (IOMS)</h1>
    <p>
      A backend API with MongoDB for managing products, inventory levels,
      and customer orders.
    </p>
  </header>

  <main>
    <section id="about">
      <h2>About the Project</h2>
      <p><strong>IOMS</strong> This project implements a complete CRUD API using Node.js, Express.js, and MongoDB (native driver).</p>
      <p>The system provides filtering, sorting, and projection capabilities for efficient data retrieval and management.</p>
    </section>

    <!-- API Test Links (we will hide it for non-admins via JS) -->
    <section id="api" class="card">
      <h2>ðŸ”— API Test Links</h2>
      <p>Click on the links below to test the API directly in your browser:</p>
      <ul id="api-links-list">
        <li><strong>GET</strong> <a href="/api/products" target="_blank">/api/products</a> - Get all products</li>
        <li><strong>GET</strong> <a href="/api/info" target="_blank">/api/info</a> - API information</li>
      </ul>
    </section>

    <!-- Products management -->
    <section id="products" class="card">
      <h2>ðŸ›’ Products Management</h2>

      <div id="notification" class="notification" style="display:none;"></div>

      <div class="products-table-container">
        <h3>Current Products</h3>
        <table class="products-table">
          <thead>
            <tr>
              <th>Product Name</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="products-tbody">
            <tr><td colspan="5" style="text-align:center;padding:2rem;color:#6b7280;">Loading products...</td></tr>
          </tbody>
        </table>
      </div>

      <!-- Add/Edit Product Form (only visible to admins) -->
      <div id="product-form-section" class="product-form-section" style="display:none;">
        <h3 id="form-title">Add New Product</h3>
        <form id="product-form" class="product-form">
          <div class="form-row">
            <div class="form-group"><label for="product-name">Product Name *</label>
              <input id="product-name" name="name" type="text" placeholder="e.g., Laptop" required></div>

            <div class="form-group"><label for="product-price">Price ($) *</label>
              <input id="product-price" name="price" type="number" step="0.01" min="0" required></div>

            <div class="form-group"><label for="product-quantity">Quantity *</label>
              <input id="product-quantity" name="quantity" type="number" min="0" required></div>
          </div>

          <div class="form-actions">
            <button type="submit" id="submit-btn" class="btn btn-primary">Add Product</button>
            <button type="button" id="cancel-btn" class="btn" style="display:none;">Cancel</button>
          </div>
        </form>
      </div>
    </section>


    <section id="team" class="card">
      <h2>ðŸ‘¥ Project Team</h2>
      <table>
        <thead><tr><th>Name</th><th>Group</th><th>Role</th></tr></thead>
        <tbody>
          <tr><td>Kuanyshbek Aisana</td><td>SE-2428</td><td>Backend Developer</td></tr>
          <tr><td>Rakhmanova Assem</td><td>SE-2428</td><td>Backend Developer</td></tr>
        </tbody>
      </table>
    </section>
  </main>

  <footer>
    <p>&copy; 2024 IOMS | Assignment 3 Part 1 | Web Technologies 2 (Back End)</p>
  </footer>

  <script src="/app.js"></script>
</body>
</html>
